package org.ecore.usefull;

import arc.Events;
import arc.struct.ObjectMap;
import arc.struct.Seq;
import mindustry.Vars;
import mindustry.game.EventType;
import mindustry.gen.Player;

public class ExploitFixer {
    public static void setup(){
        Seq<Integer> sus = new Seq<>();
        Events.on(EventType.PlayerConnect.class, e -> sus.add(e.player.id));
        Events.on(EventType.PlayerJoin.class, e -> sus.remove(e.player.id));
        Events.on(EventType.PlayerLeave.class, e -> sus.remove(e.player.id));
        Vars.netServer.admins.addActionFilter(action -> {
            if (sus.contains(action.player.id)) {
                action.player.kick("Please do not interact with world until confirming your connection", 1);
                sus.remove(action.player.id);
                return false;
            }
            return true;
        });
    }
}
